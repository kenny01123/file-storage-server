(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{69:function(e,t,n){},96:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(0),i=n.n(a),c=n(8),s=n.n(c),l=(n(69),n(56)),u=n(52),o=n.n(u),f=n(21),p=n.n(f),d=n(37),j=n(38),b=n.n(j);function h(){return(h=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("/api/files");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","fetch error!");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function m(){return(m=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.delete("/api/files/"+t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(d.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),e.next=4,b.a.post("/api/files",n,{headers:{"Content-Type":"multipart/form-data"}});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(e){var t=e.fileList,n=e.setFileList,a=e.confirm,i=e.file;function c(e){var r="".concat(e.name," will be deleted forever!");a({description:r}).then((function(){(function(e){return m.apply(this,arguments)})(e.name).then((function(e){return console.log(e)})),n(t.filter((function(t){return t!==e})))}))}return Object(r.jsx)(o.a,{className:"DeleteButton",onClick:function(){return c(i)}})},v=n(35);var g=function(e){var t=e.fileList,n=e.setFileList,a=Object(v.b)();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"IndexRow",children:[Object(r.jsx)("h2",{id:"IndexName",children:"Name"})," ",Object(r.jsx)("h2",{id:"IndexSize",children:"Size"})," ",Object(r.jsx)("h2",{id:"IndexDate",children:"Date"})]}),Object(r.jsx)("ul",{"data-testid":"FileList",children:t.map((function(e){return Object(r.jsxs)("li",{className:"FileList",children:[Object(r.jsx)("p",{className:"fileName",children:e.name}),Object(r.jsx)("p",{className:"fileSize",children:e.size}),Object(r.jsx)("p",{className:"fileDate",children:e.date}),Object(r.jsx)(O,{fileList:t,setFileList:n,confirm:a,file:e})]},e.name)}))})]})},L=n(57),N=n(126),F=n(54),w=n.n(F);var y=function(e){var t=e.fileList,n=e.setFileList,i=e.classes,c=e.byteSize,s=Object(a.useRef)(null);return Object(r.jsxs)("div",{className:"UploadButton",children:[Object(r.jsx)(N.a,{variant:"contained",color:"primary",className:i.button,startIcon:Object(r.jsx)(w.a,{}),onClick:function(){s.current.click()},children:"Upload"})," ",Object(r.jsx)("input",{onChange:function(e){var r=e.target.files[0];console.log(r),r.name&&function(e){return x.apply(this,arguments)}(r).then((function(e){if(console.log(e),"success!"===e){var a={name:r.name,date:"Just Now",size:"".concat(c(r.size)).replace(/\s+/g,"")};console.log(a);var i=[a].concat(Object(L.a)(t));n(i)}}))},type:"file",name:"file",className:"hide",ref:s,"data-testid":"hidden-input"})]})},S=n(55),C=n.n(S),k=(n(96),n(125)),z=Object(k.a)((function(e){return{button:{margin:e.spacing(1)},container:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",gridGap:e.spacing(3)},paper:{padding:e.spacing(1),textAlign:"center",color:"theme.palette.text.secondary",whiteSpace:"nowrap",marginBottom:e.spacing(1)},divider:{margin:e.spacing(2,0)}}}));var I=function(){var e=z(),t=Object(a.useState)([]),n=Object(l.a)(t,2),i=n[0],c=n[1],s=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return function(){return h.apply(this,arguments)}().then((function(e){if(!s.current){var t=e.sort((function(e,t){return e.unix_time-t.unix_time})).reverse();c(t)}})),function(){s.current=!0}}),[]),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("header",{className:"AppHeader",children:"Woven Planet File Storage Service"}),Object(r.jsxs)("div",{className:"Container",children:[Object(r.jsx)(y,{fileList:i,setFileList:c,classes:e,byteSize:C.a}),i?Object(r.jsx)(g,{fileList:i,setFileList:c}):null]})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,128)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};s.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(v.a,{children:Object(r.jsx)(I,{})})}),document.getElementById("root")),D()}},[[98,1,2]]]);
//# sourceMappingURL=main.38e8ac36.chunk.js.map