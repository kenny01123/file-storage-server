{"version":3,"sources":["utils/index.js","components/Delete.jsx","components/FileList.jsx","components/Upload.jsx","App.js","reportWebVitals.js","index.js"],"names":["a","axios","get","res","data","fileName","delete","file","formData","FormData","append","post","headers","Delete","fileList","setFileList","confirm","deleteHandler","selectedFile","text","name","description","then","deleteFile","console","log","filter","className","onClick","FileList","useConfirm","id","data-testid","map","size","date","Upload","classes","byteSize","fileRef","useRef","Button","variant","color","button","startIcon","current","click","onChange","e","target","files","uploadFile","newFile","replace","updatedList","type","ref","useStyles","makeStyles","theme","margin","spacing","container","display","gridTemplateColumns","gridGap","paper","padding","textAlign","whiteSpace","marginBottom","divider","App","useState","fetchCancelled","useEffect","listFiles","sorted","sort","b","unix_time","reverse","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.38e8ac36.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport async function listFiles() {\n  try {\n    const res = await axios.get(\"/api/files\");\n    return res.data;\n  } catch {\n    return \"fetch error!\";\n  }\n}\n\nexport async function deleteFile(fileName) {\n  const res = await axios.delete(\"/api/files/\" + fileName);\n  return res.data;\n}\n\nexport async function uploadFile(file) {\n  let formData = new FormData();\n  formData.append(\"file\", file);\n  const res = await axios.post(\"/api/files\", formData, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n    },\n  });\n  return res.data;\n}\n","import React from \"react\";\nimport DeleteForeverIcon from \"@material-ui/icons/DeleteForever\";\nimport { deleteFile } from \"../utils/index.js\";\n\nfunction Delete({ fileList, setFileList, confirm, file }) {\n  function deleteHandler(selectedFile) {\n    const text = `${selectedFile.name} will be deleted forever!`;\n    confirm({ description: text }).then(() => {\n      deleteFile(selectedFile.name).then((res) => console.log(res));\n      setFileList(fileList.filter((file) => file !== selectedFile));\n    });\n  }\n  return (\n    <DeleteForeverIcon\n      className=\"DeleteButton\"\n      onClick={() => deleteHandler(file)}\n    />\n  );\n}\n\nexport default Delete;\n","import React from \"react\";\nimport Delete from \"./Delete\";\n\nimport { useConfirm } from \"material-ui-confirm\";\n\nfunction FileList({ fileList, setFileList }) {\n  const confirm = useConfirm();\n\n  return (\n    <>\n      <div className=\"IndexRow\">\n        <h2 id=\"IndexName\">Name</h2> <h2 id=\"IndexSize\">Size</h2>{\" \"}\n        <h2 id=\"IndexDate\">Date</h2>\n      </div>\n      <ul data-testid=\"FileList\">\n        {fileList.map((file) => (\n          <li key={file.name} className=\"FileList\">\n            <p className=\"fileName\">{file.name}</p>\n            <p className=\"fileSize\">{file.size}</p>\n            <p className=\"fileDate\">{file.date}</p>\n            <Delete\n              fileList={fileList}\n              setFileList={setFileList}\n              confirm={confirm}\n              file={file}\n            />\n          </li>\n        ))}\n      </ul>\n    </>\n  );\n}\n\nexport default FileList;\n","import React, { useRef } from \"react\";\nimport { uploadFile } from \"../utils/index.js\";\n\nimport Button from \"@material-ui/core/Button\";\nimport CloudUploadIcon from \"@material-ui/icons/CloudUpload\";\n\nfunction Upload({ fileList, setFileList, classes, byteSize }) {\n  const fileRef = useRef(null);\n\n  function uploadHandler(e) {\n    const file = e.target.files[0];\n    console.log(file);\n    if (file.name)\n      uploadFile(file).then((res) => {\n        console.log(res);\n        if (res === \"success!\") {\n          const newFile = {\n            name: file.name,\n            date: \"Just Now\",\n            size: `${byteSize(file.size)}`.replace(/\\s+/g, \"\"),\n          };\n          console.log(newFile);\n          const updatedList = [newFile, ...fileList];\n          setFileList(updatedList);\n        }\n      });\n  }\n\n  return (\n    <div className=\"UploadButton\">\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        className={classes.button}\n        startIcon={<CloudUploadIcon />}\n        onClick={() => {\n          fileRef.current.click();\n        }}\n      >\n        Upload\n      </Button>{\" \"}\n      <input\n        onChange={uploadHandler}\n        type=\"file\"\n        name={\"file\"}\n        className=\"hide\"\n        ref={fileRef}\n        data-testid=\"hidden-input\"\n      ></input>\n    </div>\n  );\n}\n\nexport default Upload;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport FileList from \"./components/FileList\";\nimport Upload from \"./components/Upload\";\n\nimport { listFiles } from \"./utils/index.js\";\n\nimport byteSize from \"byte-size\";\n\n//CSS and Material UI setups\nimport \"./css/App.css\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n  container: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(12, 1fr)\",\n    gridGap: theme.spacing(3),\n  },\n  paper: {\n    padding: theme.spacing(1),\n    textAlign: \"center\",\n    color: \"theme.palette.text.secondary\",\n    whiteSpace: \"nowrap\",\n    marginBottom: theme.spacing(1),\n  },\n  divider: {\n    margin: theme.spacing(2, 0),\n  },\n}));\n\nfunction App() {\n  const classes = useStyles();\n  //states setup\n  const [fileList, setFileList] = useState([]);\n  let fetchCancelled = useRef(false);\n  //fetching list of files in server\n  useEffect(() => {\n    listFiles().then((data) => {\n      if (!fetchCancelled.current) {\n        const sorted = data.sort((a, b) => a.unix_time - b.unix_time).reverse();\n        setFileList(sorted);\n      }\n    });\n    return () => {\n      fetchCancelled.current = true;\n    };\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <header className=\"AppHeader\">Woven Planet File Storage Service</header>\n      <div className=\"Container\">\n        <Upload\n          fileList={fileList}\n          setFileList={setFileList}\n          classes={classes}\n          byteSize={byteSize}\n        />\n        {fileList ? (\n          <FileList fileList={fileList} setFileList={setFileList} />\n        ) : null}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./css/index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { ConfirmProvider } from \"material-ui-confirm\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ConfirmProvider>\n      <App />\n    </ConfirmProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}